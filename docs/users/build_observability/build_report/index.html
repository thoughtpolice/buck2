<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-users/build_observability/build_report">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Build Report | Buck2</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://buck2.build/docs/users/build_observability/build_report/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Build Report | Buck2"><meta data-rh="true" name="description" content="The build report is a JSON file that you can ask buck to output which contains"><meta data-rh="true" property="og:description" content="The build report is a JSON file that you can ask buck to output which contains"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://buck2.build/docs/users/build_observability/build_report/"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/users/build_observability/build_report/" hreflang="en"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/users/build_observability/build_report/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GEGGHE39PE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GEGGHE39PE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.e465f46c.css">
<link rel="preload" href="/assets/js/runtime~main.75842784.js" as="script">
<link rel="preload" href="/assets/js/main.d596659f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Buck2</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/api/">API</a><a class="navbar__item navbar__link" href="/docs/prelude/globals/">Rules</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about/why/">About Buck2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts/key_concepts/">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/users/commands/aquery/">Buck2 Users</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/users/commands/aquery/">Commands</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/cheat_sheet/">Cheat Sheet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/users/faq/common_issues/">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/users/build_observability/interactive_console/">Build Observability</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/build_observability/interactive_console/">Buck2 Consoles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/build_observability/logging/">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/users/build_observability/build_report/">Build Report</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/remote_execution/">Remote Execution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/users/query/aquery/">Queries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/users/advanced/deferred_materialization/">Advanced Features</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/rule_authors/writing_rules/">Rule Authors</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developers/bxl/">BXL Developers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developers/architecture/buck2/">Buck2 Developers</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Buck2 Users</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Build Observability</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Build Report</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Build Report</h1></header><p>The build report is a JSON file that you can ask buck to output which contains
structured information about the result of your build. It is particularly
valuable for its reporting of <em>unsuccessful</em> outcomes in addition to
<em>successful</em> ones; usually, most use cases that only need to care about
successful outcomes are well served by direct usage of the CLI.</p><p>To request a build report, pass <code>--build-report &lt;path&gt;</code> to <code>buck build</code> on the
CLI.</p><p>At a high level, the build report outputs information for each of the targets
that you requested to have built on the CLI. As a result, it may report
information for more than one configuration or subtarget of a target. For
example, this can happen if you passed <code>--target-platforms</code> or built <code>:target</code>
and <code>:target[sub]</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="schema">Schema<a href="#schema" class="hash-link" aria-label="Direct link to Schema" title="Direct link to Schema">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BuildReport {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # A unique ID identifying this buck invocation. Currently a UUID, however</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # that may change in the future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace_id: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # True if all requested targets built successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    success: bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The absolute path to the project root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    project_root: Path,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The results of the build, categorized by unconfigured target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results: dict[TargetLabel, BuildReportEntry],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # A cache for error message lookup. This is meant for deduplicating strings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # that might otherwise appear many times in the build report and cause an</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # unnecessary size increase. They keys are used in other fields in the build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # report in reference to these strings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strings: dict[str, str],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # BUCK1 BACKCOMPAT ONLY!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Currently always empty. Will be filled in if a flag is passed in the future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # A map from targets that failed to build to error messages describing the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    failures: dict[TargetLabel, str],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BuildReportEntry {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The results of building the target in the given configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configured: dict[Configuration, ConfiguredBuildReportEntry],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Errors encountered while building this target.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Note that this does not include the errors that are found within the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # `ConfiguredBuildReportEntry`s. Instead, it includes additional errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # which could not be associated with a specific configuration of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # target, typically because they occurred before the target could be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # configured.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    errors: list[Error],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # BUCK1 BACKCOMPAT ONLY!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The two fields below are included for buck1 backwards compatibility only.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # They are both computed by aggregating across all the configured targets in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # the way you might expect.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    success: &quot;FAIL&quot; | &quot;SUCCESS,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs: dict[str, list[Path]],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The path to the package containing this target, relative to the project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # root. This is the source code location for this target.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    package_project_relative_path: Optional[str]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConfiguredBuildReportEntry {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Did this target build successfully or not?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    success: &quot;FAIL&quot; | &quot;SUCCESS,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # A map of subtargets that were built to a list of the successfully built</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # outputs for that subtarget.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The keys are generated by joining the subtargets with a `|`. For example,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # if you request to have `:target` and `:target[foo][bar]` built on the CLI,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # this list will contain one entry for `&quot;&quot;` and one for `&quot;foo|bar&quot;`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs: dict[str, list[Path]],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The number of targets in the configured dependency graph of this target.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # This is only included if `-c buck2.log_configured_graph_size=true` is set.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Otherwise, it is left as None.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configured_graph_size: Optional[uint],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The stringified hash of the same stringified error message that is shown to the user on the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # console. The hash is stored as the key in the `strings` cache of the `BuildReport`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message_content: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Structured action error. Present only if the error was actually an action error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    action_error: Optional[ActionError],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # An index that can be used to detect duplicate errors. Two errors with the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # same cause index have the same cause. Note that that does not mean that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # they have the same error message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cause_index: uint,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionError {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The action key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key: ActionKey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The action name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: ActionName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Digest of the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    digest: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Stringified hash of the stderr of the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stderr: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Stringified hash of the stdout of the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stdout: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Stringified hash of the same stringified error message that is provided by the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Optional list of error categorizations provided by an error handler which is invoked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # in the event of a failed action, or an error message if the error handler failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error_diagnostics: Optional[ActionErrorDiagnostics],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionKey {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The configured target, anon target, or bxl function which owns this action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    owner: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionName {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The category of the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The optional identifier of the action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identifier: Optional[str],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum ActionErrorDiagnostics {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The list of sub errors if the error handler succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub_errors: list[ActionSubError],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The stringified hash of the error message if the error handler failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    handler_invocation_error: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionSubError {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Name of the error category. The category should be finer grain error categorizations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # provided by the rule authors, and tend to be language specific. These should not be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # any kind of shared concepts among all errors for all languages/rules. For example,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # timeouts and infra errors should not go here - buck2 tries to categorize these types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # of errors automatically. An example of a finer grain error category may be the error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # code for rustc outputs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The stringified hash of the extra message provided for the specific sub-error category.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message_content: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # List of error locations, if any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    locations: Optional[list[ActionErrorLocation]],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionErrorLocation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # File path where the error appeared, preferrably either project-relative or absolute.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file: str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Optional line number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line: Optional[u64]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="on-compatibility">On Compatibility<a href="#on-compatibility" class="hash-link" aria-label="Direct link to On Compatibility" title="Direct link to On Compatibility">​</a></h3><p>The format of the build report is generally stable. However, note that new
fields may be added at any time, and you should ensure this does not cause your
parsing to fail.</p><p>A number of fields above are marked as being for buck1 backwards compatibility
only. These fields all have superior alternatives available in the build report
already. We would strongly prefer that new code neither use nor parse them, as
this increases the likelyhood that they can be removed one day.</p><p>The build report additionally outputs a few fields that are intentionally not
documented here. Those fields are even less useful than ones documented as being
for backwards compatibility only, and even closer to removal. <strong>Please</strong> avoid
using or parsing these if at all possible.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations">​</a></h3><p>The build report currently has at least the following limitations:</p><ol><li>It includes only one action error per failed target. This is the expected
behavior when <code>--keep-going</code> is not passed, but when <code>--keep-going</code> is
passed, this is a bug.</li><li>It is currently not generated when a non-existant package is specified on
the command line. This is also a bug.</li><li>It cannot be requested for any buck2 command other than <code>build</code></li><li>Errors do not contain any additional metadata outside of the error message.
This will be made available as such metadata is available in buck2.</li><li>The &quot;failures&quot; field is always empty. This will be changed under a
backcompat opt-in flag in the future.</li></ol><p>Finally, it&#x27;s worth raising that the concept of error deduplication has some
fundamental limitations; if two targets both refer to the same non-existant
dependency, do those errors have the same cause (the dependency doesn&#x27;t exist)
or different causes (each target is individually broken)? As a result, the exact
details of when two errors are considered to have the same cause are not
generally stable, and may not always be what you expect.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/users/build_observability/logging/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Logging</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/users/remote_execution/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Remote Execution</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#schema" class="table-of-contents__link toc-highlight">Schema</a><ul><li><a href="#on-compatibility" class="table-of-contents__link toc-highlight">On Compatibility</a></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">User guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.75842784.js"></script>
<script src="/assets/js/main.d596659f.js"></script>
</body>
</html>